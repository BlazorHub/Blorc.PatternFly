@page "/components/icon"

@using System.Linq;
@using Blazorc.PatternFly.Components.Icon

<Metadata ComponentName="Icon" />

<section class="ws-section ws-live-demo">
    @CustomRender
</section>

@functions {

    private RenderFragment CustomRender;

    private RenderFragment CreateComponent() => builder =>
    {
        builder.OpenElement(0, "table");

        var iconTypes = typeof(IconComponentBase).Assembly.GetTypes().Where(x => x.Name.EndsWith("Icon")).OrderBy(x => x.Name);

        foreach (var iconType in iconTypes)
        {
            builder.OpenElement(1, "tr");
            
            builder.OpenElement(2, "td");
            builder.OpenComponent(3, iconType);
            builder.CloseComponent();
            builder.CloseElement();

            builder.OpenElement(4, "td");
            builder.OpenElement(5, "span");
            builder.AddContent(6, iconType.Name);
            builder.CloseElement();
            builder.CloseElement();

            builder.CloseElement();
        }

        builder.CloseElement();
    };

    protected override void OnInit()
    {
        base.OnInit();

        CustomRender = CreateComponent();
    }

}

