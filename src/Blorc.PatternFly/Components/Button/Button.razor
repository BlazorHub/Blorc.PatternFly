@using Microsoft.AspNetCore.Components
@inherits Blorc.PatternFly.Components.Button.ButtonComponent

@CustomRender

@functions
{
    private RenderFragment CustomRender;

    private RenderFragment CreateComponent() => builder =>
    {
        builder.OpenElement(0, Component);

        if (Component == "button")
        {
            builder.AddAttribute(1, "type", Type.ToString().ToLower());
        }

        builder.AddAttribute(2, "class", $"pf-c-button {Class}");
        builder.AddAttribute(3, "disabled", Microsoft.AspNetCore.Components.BindMethods.GetValue(IsDisabled));
        builder.AddAttribute(4, "onclick", OnButtonClicked);

        if (!string.IsNullOrWhiteSpace(Href))
        {
            builder.AddAttribute(5, "href", Href);
            builder.AddAttribute(6, "target", "_blank");
        }

        builder.AddContent(7, ChildContent);
        builder.CloseElement();
    };

    protected override void OnInit()
    {
        base.OnInit();

        CustomRender = CreateComponent();
    }

    private void OnButtonClicked(UIMouseEventArgs e)
    {
        var handler = OnClick;
        if (handler != null)
        {
            handler(this, EventArgs.Empty);
        }
    }
}